<template>
  <LeCard title="ğŸ“š ä½¿ç”¨æŒ‡å—" :bordered="false">
    <n-collapse>
      <n-collapse-item title="å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ä¸»é¢˜ç³»ç»Ÿ" name="1">
        <n-space direction="vertical">
          <n-text>1. å®‰è£… @lee/theme åŒ…</n-text>
          <n-code code="pnpm add @lee/theme" language="bash" />

          <n-text>2. åœ¨ App.vue ä¸­å¼•å…¥ useTheme å¹¶åˆå§‹åŒ–</n-text>
          <n-code :code="appInitCode" language="vue" />

          <n-text>3. ä½¿ç”¨ CSS å˜é‡æˆ–ä¸»é¢˜åŒ–ç»„ä»¶</n-text>
          <n-code :code="cssVarUsageCode" language="scss" />

          <n-text>4. å¯é€‰ï¼šé…ç½®ä¸»é¢˜åˆ‡æ¢å™¨ç»„ä»¶</n-text>
          <n-code :code="themeSwitcherCode" language="vue" />
        </n-space>
      </n-collapse-item>

      <n-collapse-item title="å¦‚ä½•è‡ªå®šä¹‰ä¸»é¢˜" name="2">
        <n-space direction="vertical">
          <n-text>ä¸»é¢˜ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜é¢„è®¾ï¼Œä½ å¯ä»¥ï¼š</n-text>
          <n-text>1. å®šä¹‰è‡ªå·±çš„è‰²æ¿ï¼ˆ10 ä¸ªè‰²é˜¶ï¼‰</n-text>
          <n-text>2. åˆ›å»ºä¸»é¢˜é¢„è®¾å¯¹è±¡</n-text>
          <n-text>3. æ³¨å†Œåˆ°ä¸»é¢˜ç®¡ç†å™¨</n-text>
          <n-code :code="customThemeCode" language="typescript" />
        </n-space>
      </n-collapse-item>

      <n-collapse-item title="CSS å˜é‡æœ€ä½³å®è·µ" name="3">
        <n-space direction="vertical">
          <n-text strong>âœ… æ¨èåšæ³•ï¼š</n-text>
          <ul>
            <li>ä¼˜å…ˆä½¿ç”¨è¯­ä¹‰åŒ–çš„ CSS å˜é‡ï¼ˆå¦‚ --le-text-1 è€Œéå…·ä½“é¢œè‰²ï¼‰</li>
            <li>åˆ©ç”¨è‰²é˜¶ç³»ç»Ÿåˆ›å»ºè§†è§‰å±‚æ¬¡ï¼ˆ1-10 é€’è¿›ï¼‰</li>
            <li>ä½¿ç”¨è®¾è®¡ token ä¿æŒä¸€è‡´æ€§ï¼ˆé—´è·ã€åœ†è§’ã€é˜´å½±ï¼‰</li>
            <li>ç»„åˆä½¿ç”¨å¤šä¸ªé˜´å½±åˆ›å»ºç‰¹æ®Šæ•ˆæœ</li>
          </ul>

          <n-text strong>âŒ é¿å…åšæ³•ï¼š</n-text>
          <ul>
            <li>ç¡¬ç¼–ç é¢œè‰²å€¼ï¼ˆ#fff, rgba(0,0,0,0.1)ï¼‰</li>
            <li>ä½¿ç”¨ä¸å­˜åœ¨çš„å˜é‡ï¼ˆå¦‚ --le-primary-rgbï¼‰</li>
            <li>æ··ç”¨ä¸åŒçš„è®¾è®¡ä½“ç³»</li>
          </ul>

          <n-code :code="bestPracticesCode" language="scss" />
        </n-space>
      </n-collapse-item>

      <n-collapse-item title="ä¸»é¢˜æŒä¹…åŒ–" name="4">
        <n-space direction="vertical">
          <n-text>ä¸»é¢˜ç³»ç»Ÿè‡ªåŠ¨å°†ç”¨æˆ·é€‰æ‹©ä¿å­˜åˆ° localStorageï¼š</n-text>
          <n-descriptions :column="1" bordered size="small">
            <n-descriptions-item label="ä¸»é¢˜é”®å">
              <n-text code>app-theme</n-text>
            </n-descriptions-item>
            <n-descriptions-item label="æ¨¡å¼é”®å">
              <n-text code>app-mode</n-text>
            </n-descriptions-item>
            <n-descriptions-item label="å­˜å‚¨æ ¼å¼">JSON å­—ç¬¦ä¸²</n-descriptions-item>
          </n-descriptions>

          <n-text>ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç®¡ç†æŒä¹…åŒ–ï¼š</n-text>
          <n-code :code="persistenceCode" language="typescript" />
        </n-space>
      </n-collapse-item>

      <n-collapse-item title="å¸¸è§é—®é¢˜" name="5">
        <n-space direction="vertical">
          <n-text strong>Q: ä¸»é¢˜åˆ‡æ¢åæ²¡æœ‰ç«‹å³ç”Ÿæ•ˆï¼Ÿ</n-text>
          <n-text>A: ç¡®ä¿ä½¿ç”¨äº†å“åº”å¼å¼•ç”¨ï¼Œä¸è¦è§£æ„ useTheme çš„è¿”å›å€¼ã€‚</n-text>

          <n-text strong>Q: æš—é»‘æ¨¡å¼ä¸‹é¢œè‰²ä¸å¯¹ï¼Ÿ</n-text>
          <n-text>A: æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†ç¡¬ç¼–ç é¢œè‰²ï¼Œåº”è¯¥ä½¿ç”¨ CSS å˜é‡ã€‚</n-text>

          <n-text strong>Q: å¦‚ä½•æ”¯æŒæ›´å¤šä¸»é¢˜ï¼Ÿ</n-text>
          <n-text>A: å‚è€ƒç°æœ‰ä¸»é¢˜é¢„è®¾ï¼Œåˆ›å»ºæ–°çš„ä¸»é¢˜é…ç½®å¹¶æ³¨å†Œã€‚</n-text>

          <n-text strong>Q: CSS å˜é‡åœ¨ TypeScript ä¸­æ²¡æœ‰ç±»å‹æç¤ºï¼Ÿ</n-text>
          <n-text>A: å¯ä»¥åˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶å£°æ˜ CSS å˜é‡ã€‚</n-text>
        </n-space>
      </n-collapse-item>
    </n-collapse>
  </LeCard>
</template>

<script setup lang="ts">
import {
  NCollapse,
  NCollapseItem,
  NSpace,
  NText,
  NCode,
  NDescriptions,
  NDescriptionsItem,
} from 'naive-ui';
import { Card as LeCard } from '@lee/ui';

const appInitCode = `<template>
  <n-config-provider :theme="naiveTheme" :theme-overrides="themeOverrides">
    <n-message-provider>
      <router-view />
    </n-message-provider>
  </n-config-provider>
</template>

<script setup>
import { computed, onMounted } from 'vue';
import { useTheme, createNaiveTheme } from '@lee/theme';
import { lightTheme, darkTheme } from 'naive-ui';

const { config, mode, initTheme } = useTheme();

onMounted(() => {
  initTheme();
});

const naiveTheme = computed(() => 
  mode.value === 'dark' ? darkTheme : lightTheme
);

const themeOverrides = computed(() => 
  createNaiveTheme(config.value)
);
<\/script>`;

const cssVarUsageCode = `.my-component {
  /* ä½¿ç”¨ä¸»é¢˜è‰² */
  color: var(--le-primary);
  background: var(--le-primary-1);
  border: 1px solid var(--le-primary-3);
  
  /* ä½¿ç”¨æ–‡æœ¬è‰² */
  .title {
    color: var(--le-text-1);
  }
  
  .description {
    color: var(--le-text-2);
  }
  
  /* ä½¿ç”¨è®¾è®¡ token */
  padding: var(--le-spacing-md);
  border-radius: var(--le-radius-lg);
  box-shadow: var(--le-shadow-1);
  
  &:hover {
    box-shadow: var(--le-shadow-2);
    transform: translateY(-2px);
  }
}`;

const themeSwitcherCode = `<template>
  <div class="theme-switcher">
    <n-select 
      v-model:value="theme" 
      :options="themeOptions"
      @update:value="setTheme"
    />
    <n-switch 
      v-model:value="isDark"
      @update:value="handleModeChange"
    />
  </div>
</template>

<script setup>
import { useTheme, themePresets } from '@lee/theme';

const { theme, mode, setTheme, setMode } = useTheme();

const isDark = computed({
  get: () => mode.value === 'dark',
  set: (val) => setMode(val ? 'dark' : 'light')
});
<\/script>`;

const customThemeCode = `// 1. å®šä¹‰è‰²æ¿
const purpleColors = [
  '#faf5ff', // 1
  '#f3e8ff', // 2
  '#e9d5ff', // 3
  '#d8b4fe', // 4
  '#c084fc', // 5
  '#a855f7', // 6 - ä¸»è‰²
  '#9333ea', // 7
  '#7e22ce', // 8
  '#6b21a8', // 9
  '#581c87', // 10
];

// 2. åˆ›å»ºä¸»é¢˜é¢„è®¾
const purpleTheme = {
  name: 'purple',
  label: 'ç´«è‰²',
  primaryColor: '#a855f7',
  light: generateColorSystem(purpleColors, false),
  dark: generateColorSystem(purpleColors, true),
};

// 3. æ³¨å†Œä¸»é¢˜
themeManager.registerTheme(purpleTheme);`;

const bestPracticesCode = `/* âœ… å¥½çš„å®è·µ */
.card {
  background: var(--le-card);
  border: 1px solid var(--le-border);
  box-shadow: var(--le-shadow-1);
  
  &:hover {
    box-shadow: var(--le-shadow-2);
  }
  
  &.selected {
    /* ç»„åˆé˜´å½±åˆ›å»ºå…‰æ™•æ•ˆæœ */
    box-shadow: var(--le-shadow-1), 0 0 0 3px var(--le-primary-1);
  }
}

/* âŒ é¿å…çš„å®è·µ */
.card {
  background: #ffffff; /* ç¡¬ç¼–ç é¢œè‰² */
  border: 1px solid #e0e0e0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  
  /* ä¸å­˜åœ¨çš„å˜é‡ */
  color: rgba(var(--le-primary-rgb), 0.5);
}`;

const persistenceCode = `import { useTheme } from '@lee/theme';

const { theme, mode, setTheme, setMode } = useTheme();

// æ‰‹åŠ¨ä¿å­˜
function saveThemePreference() {
  localStorage.setItem('custom-theme', theme.value);
  localStorage.setItem('custom-mode', mode.value);
}

// æ‰‹åŠ¨æ¢å¤
function loadThemePreference() {
  const savedTheme = localStorage.getItem('custom-theme');
  const savedMode = localStorage.getItem('custom-mode');
  
  if (savedTheme) setTheme(savedTheme);
  if (savedMode) setMode(savedMode);
}`;
</script>

<style lang="scss" scoped>
ul {
  margin: 8px 0;
  padding-left: 20px;
  color: var(--le-text-2);

  li {
    margin: 4px 0;
  }
}
</style>
